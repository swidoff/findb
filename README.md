findb: Specialized Financial Time Series Database
==================================================

Initial Testing
---------------

**Read From CSV File**


Reading `prices-00.csv`:

```
$ wc -l content/prices-00.csv 
2074291 content/prices-00.csv
```

```
    let query_list = vec![
        Query {
            build_date: 20200618,
            start_date: 20200612,
            end_date: 20200618,
            eff_timestamp: 1595807440,
            asset_ids: vec!["@ALIGN2".to_string(), "@YANTA4".to_string()],
        },
        Query {
            build_date: 20200618,
            start_date: 20200612,
            end_date: 20200618,
            eff_timestamp: 1595807440,
            asset_ids: vec!["@AMINE1".to_string(), "@ZVEZD3".to_string()],
        },
    ];
```

```
$ cargo run
   Compiling arrow-flight v1.0.0
   Compiling arrow v1.0.0
   Compiling findb v0.1.0 (/home/seth/dev/findb)
    Finished dev [unoptimized + debuginfo] target(s) in 11.72s
     Running `target/debug/findb`
Loading table.
Elapsed: Ok(129.837356604s)
Issuing query.
Elapsed: Ok(5.422443967s)
+------------+---------+-----------+------------+
| build_date | fid     | data_date | close      |
+------------+---------+-----------+------------+
| 20200618   | @ALIGN2 | 20200612  | 223.05001  |
| 20200618   | @YANTA4 | 20200612  | 48.5       |
| 20200618   | @ALIGN2 | 20200615  | 225.4      |
| 20200618   | @YANTA4 | 20200615  | 47.160004  |
| 20200618   | @ALIGN2 | 20200616  | 237.2      |
| 20200618   | @YANTA4 | 20200616  | 48.25      |
| 20200618   | @ALIGN2 | 20200617  | 235.35001  |
| 20200618   | @YANTA4 | 20200617  | 47.820008  |
| 20200618   | @YANTA4 | 20200618  | 48.600007  |
| 20200618   | @AMINE1 | 20200612  | 0.87499989 |
| 20200618   | @AMINE1 | 20200615  | 0.9199999  |
| 20200618   | @ZVEZD3 | 20200615  | 4.5699997  |
| 20200618   | @AMINE1 | 20200616  | 0.92500002 |
| 20200618   | @ZVEZD3 | 20200616  | 4.5        |
| 20200618   | @AMINE1 | 20200617  | 0.92500002 |
| 20200618   | @ZVEZD3 | 20200617  | 4.5699997  |
| 20200618   | @AMINE1 | 20200618  | 0.84999985 |
| 20200618   | @ZVEZD3 | 20200618  | 4.5150004  |
+------------+---------+-----------+------------+
```

**Run from IPC File (memory mapped)**

```
Reading from: "content/prices-00.ipc"
Elapsed: Ok(529.455µs). Num batches: 2026
Issuing query.
+------------+---------+-----------+------------+
| build_date | fid     | data_date | close      |
+------------+---------+-----------+------------+
| 20200618   | @ALIGN2 | 20200612  | 223.05001  |
| 20200618   | @YANTA4 | 20200612  | 48.5       |
| 20200618   | @ALIGN2 | 20200615  | 225.4      |
| 20200618   | @YANTA4 | 20200615  | 47.160004  |
| 20200618   | @ALIGN2 | 20200616  | 237.2      |
| 20200618   | @AMINE1 | 20200612  | 0.87499989 |
| 20200618   | @AMINE1 | 20200615  | 0.9199999  |
| 20200618   | @ZVEZD3 | 20200615  | 4.5699997  |
| 20200618   | @AMINE1 | 20200616  | 0.92500002 |
+------------+---------+-----------+------------+
+------------+---------+-----------+------------+
| build_date | fid     | data_date | close      |
+------------+---------+-----------+------------+
| 20200618   | @YANTA4 | 20200616  | 48.25      |
| 20200618   | @ALIGN2 | 20200617  | 235.35001  |
| 20200618   | @YANTA4 | 20200617  | 47.820008  |
| 20200618   | @YANTA4 | 20200618  | 48.600007  |
| 20200618   | @ZVEZD3 | 20200616  | 4.5        |
| 20200618   | @AMINE1 | 20200617  | 0.92500002 |
| 20200618   | @ZVEZD3 | 20200617  | 4.5699997  |
| 20200618   | @AMINE1 | 20200618  | 0.84999985 |
| 20200618   | @ZVEZD3 | 20200618  | 4.5150004  |
+------------+---------+-----------+------------+
Elapsed: Ok(4.214973993s)
```

**Read Last 100 Batches**

FileReader:

```
Reading from: "content/prices-00.ipc"
Elapsed: Ok(393.43µs). Num batches: 2026
Issuing query.
+------------+---------+-----------+------------+
| build_date | fid     | data_date | close      |
+------------+---------+-----------+------------+
| 20200618   | @ALIGN2 | 20200612  | 223.05001  |
| 20200618   | @YANTA4 | 20200612  | 48.5       |
| 20200618   | @ALIGN2 | 20200615  | 225.4      |
| 20200618   | @YANTA4 | 20200615  | 47.160004  |
| 20200618   | @ALIGN2 | 20200616  | 237.2      |
| 20200618   | @AMINE1 | 20200612  | 0.87499989 |
| 20200618   | @AMINE1 | 20200615  | 0.9199999  |
| 20200618   | @ZVEZD3 | 20200615  | 4.5699997  |
| 20200618   | @AMINE1 | 20200616  | 0.92500002 |
+------------+---------+-----------+------------+
+------------+---------+-----------+------------+
| build_date | fid     | data_date | close      |
+------------+---------+-----------+------------+
| 20200618   | @YANTA4 | 20200616  | 48.25      |
| 20200618   | @ALIGN2 | 20200617  | 235.35001  |
| 20200618   | @YANTA4 | 20200617  | 47.820008  |
| 20200618   | @YANTA4 | 20200618  | 48.600007  |
| 20200618   | @ZVEZD3 | 20200616  | 4.5        |
| 20200618   | @AMINE1 | 20200617  | 0.92500002 |
| 20200618   | @ZVEZD3 | 20200617  | 4.5699997  |
| 20200618   | @AMINE1 | 20200618  | 0.84999985 |
| 20200618   | @ZVEZD3 | 20200618  | 4.5150004  |
+------------+---------+-----------+------------+
Elapsed: Ok(238.984782ms)
```

MemMap:

```
Reading from: "content/prices-00.ipc"
Elapsed: Ok(393.43µs). Num batches: 2026
Issuing query.
+------------+---------+-----------+------------+
| build_date | fid     | data_date | close      |
+------------+---------+-----------+------------+
| 20200618   | @ALIGN2 | 20200612  | 223.05001  |
| 20200618   | @YANTA4 | 20200612  | 48.5       |
| 20200618   | @ALIGN2 | 20200615  | 225.4      |
| 20200618   | @YANTA4 | 20200615  | 47.160004  |
| 20200618   | @ALIGN2 | 20200616  | 237.2      |
| 20200618   | @AMINE1 | 20200612  | 0.87499989 |
| 20200618   | @AMINE1 | 20200615  | 0.9199999  |
| 20200618   | @ZVEZD3 | 20200615  | 4.5699997  |
| 20200618   | @AMINE1 | 20200616  | 0.92500002 |
+------------+---------+-----------+------------+
+------------+---------+-----------+------------+
| build_date | fid     | data_date | close      |
+------------+---------+-----------+------------+
| 20200618   | @YANTA4 | 20200616  | 48.25      |
| 20200618   | @ALIGN2 | 20200617  | 235.35001  |
| 20200618   | @YANTA4 | 20200617  | 47.820008  |
| 20200618   | @YANTA4 | 20200618  | 48.600007  |
| 20200618   | @ZVEZD3 | 20200616  | 4.5        |
| 20200618   | @AMINE1 | 20200617  | 0.92500002 |
| 20200618   | @ZVEZD3 | 20200617  | 4.5699997  |
| 20200618   | @AMINE1 | 20200618  | 0.84999985 |
| 20200618   | @ZVEZD3 | 20200618  | 4.5150004  |
+------------+---------+-----------+------------+
Elapsed: Ok(238.984782ms)
```

**With Binary Search on the Date Column**

```
+------------+---------+-----------+------------+
| build_date | fid     | data_date | close      |
+------------+---------+-----------+------------+
| 20200618   | @ALIGN2 | 20200612  | 223.05001  |
| 20200618   | @YANTA4 | 20200612  | 48.5       |
| 20200618   | @ALIGN2 | 20200615  | 225.4      |
| 20200618   | @YANTA4 | 20200615  | 47.160004  |
| 20200618   | @ALIGN2 | 20200616  | 237.2      |
| 20200618   | @AMINE1 | 20200612  | 0.87499989 |
| 20200618   | @AMINE1 | 20200615  | 0.9199999  |
| 20200618   | @ZVEZD3 | 20200615  | 4.5699997  |
| 20200618   | @AMINE1 | 20200616  | 0.92500002 |
+------------+---------+-----------+------------+
+------------+---------+-----------+------------+
| build_date | fid     | data_date | close      |
+------------+---------+-----------+------------+
| 20200618   | @YANTA4 | 20200616  | 48.25      |
| 20200618   | @ALIGN2 | 20200617  | 235.35001  |
| 20200618   | @YANTA4 | 20200617  | 47.820008  |
| 20200618   | @YANTA4 | 20200618  | 48.600007  |
| 20200618   | @ZVEZD3 | 20200616  | 4.5        |
| 20200618   | @AMINE1 | 20200617  | 0.92500002 |
| 20200618   | @ZVEZD3 | 20200617  | 4.5699997  |
| 20200618   | @AMINE1 | 20200618  | 0.84999985 |
| 20200618   | @ZVEZD3 | 20200618  | 4.5150004  |
+------------+---------+-----------+------------+
Elapsed: Ok(17.156278ms)
```

**With Index on the Date Column**

```
Reading from: "content/prices-00.ipc"
Elapsed: Ok(399.295µs). Num batches: 2026
Reading index file: "content/prices-00.idx"
Elapsed: Ok(4.025042ms)
Issuing query.
+------------+---------+-----------+------------+
| build_date | fid     | data_date | close      |
+------------+---------+-----------+------------+
| 20200618   | @ALIGN2 | 20200612  | 223.05001  |
| 20200618   | @YANTA4 | 20200612  | 48.5       |
| 20200618   | @ALIGN2 | 20200615  | 225.4      |
| 20200618   | @YANTA4 | 20200615  | 47.160004  |
| 20200618   | @ALIGN2 | 20200616  | 237.2      |
| 20200618   | @AMINE1 | 20200612  | 0.87499989 |
| 20200618   | @AMINE1 | 20200615  | 0.9199999  |
| 20200618   | @ZVEZD3 | 20200615  | 4.5699997  |
| 20200618   | @AMINE1 | 20200616  | 0.92500002 |
+------------+---------+-----------+------------+
+------------+---------+-----------+------------+
| build_date | fid     | data_date | close      |
+------------+---------+-----------+------------+
| 20200618   | @YANTA4 | 20200616  | 48.25      |
| 20200618   | @ALIGN2 | 20200617  | 235.35001  |
| 20200618   | @YANTA4 | 20200617  | 47.820008  |
| 20200618   | @YANTA4 | 20200618  | 48.600007  |
| 20200618   | @ZVEZD3 | 20200616  | 4.5        |
| 20200618   | @AMINE1 | 20200617  | 0.92500002 |
| 20200618   | @ZVEZD3 | 20200617  | 4.5699997  |
| 20200618   | @AMINE1 | 20200618  | 0.84999985 |
| 20200618   | @ZVEZD3 | 20200618  | 4.5150004  |
+------------+---------+-----------+------------+
Elapsed: Ok(10.116093ms)
```